# ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á setid ‡πÅ‡∏•‡∏∞ set_zero_angle
## 1. ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á `setid`
‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î id ‡∏Ç‡∏≠‡∏á MT6835 ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô main loop ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏´‡∏ô‡∏î id
```c
mt6835_set_id(mt6835_1, 0x00);
HAL_Delay(1);
uint8_t id = mt6835_get_id(mt6835_1);
printf("id: 0x%x\r\n", id);
```
+ `mt6835_set_id`‡∏Å‡∏≥‡∏´‡∏ô‡∏î id ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏•‡∏Ç‡∏ê‡∏≤‡∏ô 16
+ `HAL_Delay(1);` ‡πÉ‡∏´‡πâ delay ‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏û‡∏∑‡∏≠‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á‡πÉ‡∏ô MT6835
+ `uint8_t id = mt6835_get_id(mt6835_1);` ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤‡πÑ‡∏ß‡πâ‡πÉ‡∏ô `id` ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á `mt6835_get_id`
+ ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤ id `printf("id: 0x%x\r\n", id);`

### üí° ‡∏™‡∏£‡∏∏‡∏õ
‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô setid ‡∏°‡∏µ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß (ID) ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö MT6835 ‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ ID ‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÅ‡∏•‡πâ‡∏ß‡∏°‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ

## 2.‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á `set_zero_angle`
‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö set_zero_angle ‡πÑ‡∏ß‡πâ:
```c
mt6835_set_zero_angle(mt6835_1, 2.0943951024f); //Set by RAD
HAL_Delay(1);
float zero_angle = mt6835_get_zero_angle(mt6835_1)
printf("Zero_angle: %f rad\r\n",zero_angle);
bool respond = mt6835_write_eeprom(mt6835);
if (!respond) 
{
    printf("write eeprom failed\r\n");
} else 
{
    printf("write eeprom success\r\n");
}
HAL_Delay(6000);    // ‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á Delay 6 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏ï‡∏≤‡∏° datasheet
```
‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô set_zero_angle ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏´‡∏ô‡∏î "‡∏à‡∏∏‡∏î‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏°‡∏∏‡∏°‡∏®‡∏π‡∏ô‡∏¢‡πå (Zero Angle)" ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö MT6835

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
#### 1.‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏°‡∏∏‡∏°‡∏®‡∏π‡∏ô‡∏¢‡πå‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå
+ `mt6835_set_zero_angle(mt6835_1, 2.0943951024f);`
    + ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÉ‡∏´‡πâ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤ `Zero Angle` ‡πÄ‡∏õ‡πá‡∏ô `2.0943951024 `‡πÄ‡∏£‡πÄ‡∏î‡∏µ‡∏¢‡∏ô (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 120 ‡∏≠‡∏á‡∏®‡∏≤)
    + ‡∏Ñ‡πà‡∏≤ `Zero Angle` ‡πÉ‡∏´‡πâ‡πÄ‡∏≠‡∏≤‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å `mt6835_get_angle` ‡∏Ñ‡πà‡∏≤ ‡∏ß‡∏á‡∏Å‡∏•‡∏° 1 ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏£‡πÄ‡∏î‡∏µ‡∏¢‡∏ô 0.0 - 6.0 
  
#### 2.‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡πà‡∏≤‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å

+ HAL_Delay(1);
    + ‡∏£‡∏≠ 1 ‡∏°‡∏¥‡∏•‡∏•‡∏¥‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡πÉ‡∏´‡πâ‡∏Ñ‡πà‡∏≤‡∏ñ‡∏π‡∏Å‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï

#### 3.‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡∏°‡∏∏‡∏°‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ

+ float zero_angle = mt6835_get_zero_angle(mt6835_1);
    + ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡∏°‡∏∏‡∏°‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ‡∏à‡∏≤‡∏Å‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå

#### 4.‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤‡∏°‡∏∏‡∏°‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏≠‡∏≠‡∏Å‡∏ó‡∏≤‡∏á Serial Monitor

+ printf("Zero_angle: %f rad\r\n", zero_angle);
    + ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤‡∏°‡∏∏‡∏°‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ó‡∏µ‡πà‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏≠‡∏≠‡∏Å‡∏°‡∏≤

#### 5.‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤‡∏•‡∏á EEPROM ‡∏Ç‡∏≠‡∏á‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå

+ bool respond = mt6835_write_eeprom(mt6835);
    + ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤‡∏°‡∏∏‡∏°‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏•‡∏á EEPROM ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏°‡πâ‡∏õ‡∏¥‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á

#### 6.‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô EEPROM ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

+ ‡∏ñ‡πâ‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚Üí printf("write eeprom success\r\n");
+ ‡∏ñ‡πâ‡∏≤‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß ‚Üí printf("write eeprom failed\r\n");

#### 7.‡∏£‡∏≠ 6 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏Å‡πà‡∏≠‡∏ô‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á

+ HAL_Delay(6000);
    + ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ EEPROM ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå

#### üí° ‡∏™‡∏£‡∏∏‡∏õ
‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô set_zero_angle ‡∏°‡∏µ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤‡∏°‡∏∏‡∏°‡∏®‡∏π‡∏ô‡∏¢‡πå‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå MT6835 ‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤‡∏•‡∏á EEPROM ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏°‡πâ‡∏õ‡∏¥‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á